extends layout

block layout-content
  div.View.UserView
    h1.Banner Delete My Scores
    div.Message
      div.Profile
        div.ProfileBottom
          img(src=userProfile.banner, class='cover', width='2500', height='250')
        div.ProfileTop
          div.opacity
            div.profilephoto
              img(src=userProfile.photo, width='200', height='200')
            div.player
              h1.white #{userProfile.username}
            div.bigstats
              h2.white Rank 
              h1.white #{userProfile.rank}
              if userProfile.rank < userProfile.oriRank
                h2.green (+#{userProfile.oriRank - userProfile.rank})
              else if userProfile.rank > userProfile.oriRank
                h2.red (-#{userProfile.rank - userProfile.oriRank})
              else  
                h2.white (+0)
            div.bigstats
              h2.white Performance
              h1.white #{userProfile.total.toFixed(2)}pp
              if userProfile.total > userProfile.oriPP
                h2.green (+#{(Math.round(100 * (userProfile.total + Number.EPSILON)) / 100 - Math.round(100 * (userProfile.oriPP + Number.EPSILON)) / 100).toFixed(2)})
              else if userProfile.total < userProfile.oriPP
                h2.red (-#{(Math.round(100 * (userProfile.oriPP + Number.EPSILON)) / 100 - Math.round(100 * (userProfile.total + Number.EPSILON)) / 100).toFixed(2)})
              else  
                h2.white (+0.00)
            div.bigstats
              h2.white Accuracy
              h1.white #{userProfile.acc.toFixed(2)}%
              if userProfile.acc > userProfile.oriacc
                h2.green (+#{(Math.round(100 * (userProfile.acc + Number.EPSILON)) / 100 - Math.round(100 * (userProfile.oriacc + Number.EPSILON)) / 100).toFixed(2)}%)
              else if userProfile.acc < userProfile.oriacc
                h2.red (-#{(Math.round(100 * (userProfile.oriacc + Number.EPSILON)) / 100 - Math.round(100 * (userProfile.acc + Number.EPSILON)) / 100).toFixed(2)}%)
              else  
                h2.white (+0.00%)
      div.Scores
        table
          thead
            tr
              th #
              th.map Map
              th.stats Star Rating
              th.stats Mods
              th.stats Accuracy(%) / Rank
              th.stats pp
              th.stats Delete
          tbody
            each score, index in userProfile.data
              if userProfile.selected[index]
                tr
                  td.stats #{index + 1}
                  td.map #{score.map}
                  td.stats #{score.difficulty}
                  td.stats #{score.mods}
                  td.stats #{(Math.round(100 * (100 * score.accuracy + Number.EPSILON)) / 100).toFixed(2)} / #{score.rank}
                  td.stats #{(Math.round(100 * (score.pp + Number.EPSILON)) / 100).toFixed(2)}
                  td.stats
                    form(action='/scores-updated', method='POST')
                      input(type='hidden', name='changeID', value=index)
                      input(type='submit', name='change', value='delete')
              else 
                tr
                  td.removedstats #{index + 1}
                  td.removedmap #{score.map}
                  td.removedstats #{score.difficulty}
                  td.removedstats #{score.mods}
                  td.removedstats #{(Math.round(100 * (100 * score.accuracy + Number.EPSILON)) / 100).toFixed(2)} / #{score.rank}
                  td.removedstats #{(Math.round(100 * (score.pp + Number.EPSILON)) / 100).toFixed(2)}
                  td.removedbutton
                    form(action='/scores-updated', method='POST')
                        input(type='hidden', name='changeID', value=index)
                        input(type='submit', name='change', value='undelete')

    div.NavButtons
      a(href="/")
        div.NavButton Try another profile
      a(href="/")
        div.NavButton Details about calculations (TBU)
